#!/bin/bash

# DEFAULTS
# =========================================================================

help=""

# get options/arguments
while getopts :h option
do
    case "${option}"
    in
        h) help="help";;
    esac
done


# display help
# -------------------------------------------------------------------------

if [[ "${help}" == "help" ]]; then
cat << EOF

-------------------------------------------------------------------------
HELP
-------------------------------------------------------------------------

ssh auf den Live-Webserver des aktuellen Projekts

-------------------------------------------------------------------------

EOF
exit
fi

if [ ! -e .siteconfig.yaml ]; then
    "Kein .siteconfig.yaml File gefunden. "; echo "Abbruch"; echo
    exit
fi

# read .siteconfig.yaml
. yaml-read

# Check siteconfig vars
if [ -z $live_username ] || [ -z $live_domain ] || [ -z $live_path ]; then
    cat << EOF

Es sind nicht alle nÃ¶tigen Variabeln in .siteconfig.yaml definiert:

    live_username: $live_username
    live_domain:   $live_domain
    live_db_host:  $live_path
EOF
exit
fi

# SSH auf den Server
ssh -t ${live_username}@${live_domain} "cd ${live_path} && cd .. ; bash"


